{"ast":null,"code":"import React,{useEffect,useState,useCallback}from'react';import{useNavigate}from'react-router-dom';import{useAuth}from'../AuthContext';// Ensure this path is correct\nimport'./css/Logout.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Logout=()=>{const{logout}=useAuth();// Destructure logout and user from useAuth\nconst navigate=useNavigate();const[loading,setLoading]=useState(true);// Handle navigation after popping state\nconst handlePopState=useCallback(()=>{navigate('/login');},[navigate]);// Logout function\nconst handleLogout=useCallback(async()=>{try{await logout();// Call the logout function from auth context\nlocalStorage.removeItem('isLoggedIn');// Clean up local storage\n}catch(error){console.error('Logout failed:',error);}finally{setLoading(false);// Update loading state\nnavigate('/login');// Navigate to login page\n}},[logout,navigate]);// Effect to handle logout on mount\nuseEffect(()=>{handleLogout();// Trigger logout\n// Prevent going back to the previous page\nwindow.history.pushState(null,document.title,window.location.href);window.addEventListener('popstate',handlePopState);return()=>{window.removeEventListener('popstate',handlePopState);// Cleanup event listener\n};},[handleLogout,handlePopState]);return/*#__PURE__*/_jsx(\"div\",{className:\"logout-container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"logout-box\",children:loading?/*#__PURE__*/_jsx(\"h1\",{children:\"Logging Out...\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Logged Out Successfully\"}),/*#__PURE__*/_jsx(\"p\",{children:\"You have been logged out. Please log in again to access your dashboard.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"logout-buttons\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"login-btn\",onClick:()=>navigate('/login'),children:\"Back to Login\"}),/*#__PURE__*/_jsx(\"button\",{className:\"home-btn\",onClick:()=>navigate('/'),children:\"Back to Homepage\"})]})]})})});};export default Logout;","map":{"version":3,"names":["React","useEffect","useState","useCallback","useNavigate","useAuth","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Logout","logout","navigate","loading","setLoading","handlePopState","handleLogout","localStorage","removeItem","error","console","window","history","pushState","document","title","location","href","addEventListener","removeEventListener","className","children","onClick"],"sources":["/workspaces/SDM-Classes/src/components/Logout.js"],"sourcesContent":["import React, { useEffect, useState, useCallback } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '../AuthContext'; // Ensure this path is correct\r\nimport './css/Logout.css';\r\n\r\nconst Logout = () => {\r\n  const { logout } = useAuth(); // Destructure logout and user from useAuth\r\n  const navigate = useNavigate();\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  // Handle navigation after popping state\r\n  const handlePopState = useCallback(() => {\r\n    navigate('/login');\r\n  }, [navigate]);\r\n\r\n  // Logout function\r\n  const handleLogout = useCallback(async () => {\r\n    try {\r\n      await logout(); // Call the logout function from auth context\r\n      localStorage.removeItem('isLoggedIn'); // Clean up local storage\r\n    } catch (error) {\r\n      console.error('Logout failed:', error);\r\n    } finally {\r\n      setLoading(false); // Update loading state\r\n      navigate('/login'); // Navigate to login page\r\n    }\r\n  }, [logout, navigate]);\r\n\r\n  // Effect to handle logout on mount\r\n  useEffect(() => {\r\n    handleLogout(); // Trigger logout\r\n\r\n    // Prevent going back to the previous page\r\n    window.history.pushState(null, document.title, window.location.href);\r\n    window.addEventListener('popstate', handlePopState);\r\n\r\n    return () => {\r\n      window.removeEventListener('popstate', handlePopState); // Cleanup event listener\r\n    };\r\n  }, [handleLogout, handlePopState]);\r\n\r\n  return (\r\n    <div className=\"logout-container\">\r\n      <div className=\"logout-box\">\r\n        {loading ? (\r\n          <h1>Logging Out...</h1>\r\n        ) : (\r\n          <>\r\n            <h1>Logged Out Successfully</h1>\r\n            <p>You have been logged out. Please log in again to access your dashboard.</p>\r\n            <div className=\"logout-buttons\">\r\n              <button className=\"login-btn\" onClick={() => navigate('/login')}>Back to Login</button>\r\n              <button className=\"home-btn\" onClick={() => navigate('/')}>Back to Homepage</button>\r\n            </div>\r\n          </>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Logout;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,CAAEC,WAAW,KAAQ,OAAO,CAC/D,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,OAASC,OAAO,KAAQ,gBAAgB,CAAE;AAC1C,MAAO,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBAE1B,KAAM,CAAAC,MAAM,CAAGA,CAAA,GAAM,CACnB,KAAM,CAAEC,MAAO,CAAC,CAAGR,OAAO,CAAC,CAAC,CAAE;AAC9B,KAAM,CAAAS,QAAQ,CAAGV,WAAW,CAAC,CAAC,CAC9B,KAAM,CAACW,OAAO,CAAEC,UAAU,CAAC,CAAGd,QAAQ,CAAC,IAAI,CAAC,CAE5C;AACA,KAAM,CAAAe,cAAc,CAAGd,WAAW,CAAC,IAAM,CACvCW,QAAQ,CAAC,QAAQ,CAAC,CACpB,CAAC,CAAE,CAACA,QAAQ,CAAC,CAAC,CAEd;AACA,KAAM,CAAAI,YAAY,CAAGf,WAAW,CAAC,SAAY,CAC3C,GAAI,CACF,KAAM,CAAAU,MAAM,CAAC,CAAC,CAAE;AAChBM,YAAY,CAACC,UAAU,CAAC,YAAY,CAAC,CAAE;AACzC,CAAE,MAAOC,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,gBAAgB,CAAEA,KAAK,CAAC,CACxC,CAAC,OAAS,CACRL,UAAU,CAAC,KAAK,CAAC,CAAE;AACnBF,QAAQ,CAAC,QAAQ,CAAC,CAAE;AACtB,CACF,CAAC,CAAE,CAACD,MAAM,CAAEC,QAAQ,CAAC,CAAC,CAEtB;AACAb,SAAS,CAAC,IAAM,CACdiB,YAAY,CAAC,CAAC,CAAE;AAEhB;AACAK,MAAM,CAACC,OAAO,CAACC,SAAS,CAAC,IAAI,CAAEC,QAAQ,CAACC,KAAK,CAAEJ,MAAM,CAACK,QAAQ,CAACC,IAAI,CAAC,CACpEN,MAAM,CAACO,gBAAgB,CAAC,UAAU,CAAEb,cAAc,CAAC,CAEnD,MAAO,IAAM,CACXM,MAAM,CAACQ,mBAAmB,CAAC,UAAU,CAAEd,cAAc,CAAC,CAAE;AAC1D,CAAC,CACH,CAAC,CAAE,CAACC,YAAY,CAAED,cAAc,CAAC,CAAC,CAElC,mBACEV,IAAA,QAAKyB,SAAS,CAAC,kBAAkB,CAAAC,QAAA,cAC/B1B,IAAA,QAAKyB,SAAS,CAAC,YAAY,CAAAC,QAAA,CACxBlB,OAAO,cACNR,IAAA,OAAA0B,QAAA,CAAI,gBAAc,CAAI,CAAC,cAEvBxB,KAAA,CAAAE,SAAA,EAAAsB,QAAA,eACE1B,IAAA,OAAA0B,QAAA,CAAI,yBAAuB,CAAI,CAAC,cAChC1B,IAAA,MAAA0B,QAAA,CAAG,yEAAuE,CAAG,CAAC,cAC9ExB,KAAA,QAAKuB,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC7B1B,IAAA,WAAQyB,SAAS,CAAC,WAAW,CAACE,OAAO,CAAEA,CAAA,GAAMpB,QAAQ,CAAC,QAAQ,CAAE,CAAAmB,QAAA,CAAC,eAAa,CAAQ,CAAC,cACvF1B,IAAA,WAAQyB,SAAS,CAAC,UAAU,CAACE,OAAO,CAAEA,CAAA,GAAMpB,QAAQ,CAAC,GAAG,CAAE,CAAAmB,QAAA,CAAC,kBAAgB,CAAQ,CAAC,EACjF,CAAC,EACN,CACH,CACE,CAAC,CACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAArB,MAAM","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}