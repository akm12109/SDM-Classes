{"ast":null,"code":"import React,{useEffect,useState}from'react';import{db}from'../firebaseConfig';import{collection,onSnapshot,doc,deleteDoc,query,getDocs}from'firebase/firestore';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const ListSection=_ref=>{let{title,items,handleDelete,handleDeleteAll,itemType}=_ref;return/*#__PURE__*/_jsxs(\"div\",{className:\"section\",children:[/*#__PURE__*/_jsx(\"h2\",{children:title}),/*#__PURE__*/_jsx(\"div\",{className:\"card-container\",children:items.map(item=>/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"h4\",{children:item.title||'Notice'}),/*#__PURE__*/_jsx(\"p\",{children:item.message||`Time: ${new Date(item.startTime).toLocaleString()}`}),/*#__PURE__*/_jsx(\"button\",{className:\"delete-btn\",onClick:()=>handleDelete(itemType,item.id),children:\"Delete\"})]},item.id))}),/*#__PURE__*/_jsxs(\"button\",{className:\"delete-all-btn\",onClick:()=>handleDeleteAll(itemType),children:[\"Delete All \",title]})]});};const ListPage=()=>{const[notices,setNotices]=useState([]);const[classes,setClasses]=useState([]);const[videos,setVideos]=useState([]);const[homework,setHomework]=useState([]);const[loading,setLoading]=useState(true);// Loading state\nconst fetchCollection=(collectionName,setter)=>{return onSnapshot(collection(db,collectionName),snapshot=>{setter(snapshot.docs.map(doc=>({id:doc.id,...doc.data()})));setLoading(false);// Stop loading when data is fetched\n});};useEffect(()=>{const unsubscribeNotices=fetchCollection('notices',setNotices);const unsubscribeClasses=fetchCollection('classes',setClasses);const unsubscribeVideos=fetchCollection('videos',setVideos);const unsubscribeHomework=fetchCollection('homework',setHomework);return()=>{unsubscribeNotices();unsubscribeClasses();unsubscribeVideos();unsubscribeHomework();};},[]);const handleDelete=async(collectionName,id)=>{if(window.confirm('Are you sure you want to delete this item?')){try{await deleteDoc(doc(db,collectionName,id));alert('Item deleted successfully!');}catch(error){console.error('Error deleting item:',error);}}};const handleDeleteAll=async collectionName=>{if(window.confirm('Are you sure you want to delete all items?')){try{const q=query(collection(db,collectionName));const querySnapshot=await getDocs(q);querySnapshot.forEach(async docItem=>{await deleteDoc(doc(db,collectionName,docItem.id));});alert('All items deleted successfully!');}catch(error){console.error('Error deleting all items:',error);}}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"style\",{children:`\n          .list-page-container {\n            padding: 20px;\n            background-color: #f8f9fa;\n            min-height: 100vh;\n          }\n          .section {\n            margin-bottom: 40px;\n          }\n          .section h2 {\n            color: #343a40;\n            margin-bottom: 20px;\n            font-size: 1.5rem;\n          }\n          .card-container {\n            display: grid;\n            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\n            gap: 20px;\n          }\n          .card {\n            background-color: white;\n            border-radius: 10px;\n            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n            padding: 20px;\n            position: relative;\n          }\n          .card h4 {\n            color: #007bff;\n            font-size: 1.2rem;\n            margin-bottom: 10px;\n          }\n          .card p {\n            color: #6c757d;\n            margin-bottom: 10px;\n          }\n          .delete-btn, .delete-all-btn {\n            background-color: #dc3545;\n            color: white;\n            border: none;\n            padding: 10px;\n            cursor: pointer;\n            border-radius: 5px;\n          }\n          .delete-all-btn {\n            margin-top: 20px;\n          }\n          .loading {\n            text-align: center;\n            font-size: 1.5rem;\n            color: #007bff;\n          }\n        `}),/*#__PURE__*/_jsx(\"div\",{className:\"list-page-container\",children:loading?/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Loading...\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ListSection,{title:\"Notices\",items:notices,handleDelete:handleDelete,handleDeleteAll:handleDeleteAll,itemType:\"notices\"}),/*#__PURE__*/_jsx(ListSection,{title:\"Classes\",items:classes,handleDelete:handleDelete,handleDeleteAll:handleDeleteAll,itemType:\"classes\"}),/*#__PURE__*/_jsx(ListSection,{title:\"Videos\",items:videos,handleDelete:handleDelete,handleDeleteAll:handleDeleteAll,itemType:\"videos\"}),/*#__PURE__*/_jsx(ListSection,{title:\"Homework\",items:homework,handleDelete:handleDelete,handleDeleteAll:handleDeleteAll,itemType:\"homework\"})]})})]});};export default ListPage;","map":{"version":3,"names":["React","useEffect","useState","db","collection","onSnapshot","doc","deleteDoc","query","getDocs","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ListSection","_ref","title","items","handleDelete","handleDeleteAll","itemType","className","children","map","item","message","Date","startTime","toLocaleString","onClick","id","ListPage","notices","setNotices","classes","setClasses","videos","setVideos","homework","setHomework","loading","setLoading","fetchCollection","collectionName","setter","snapshot","docs","data","unsubscribeNotices","unsubscribeClasses","unsubscribeVideos","unsubscribeHomework","window","confirm","alert","error","console","q","querySnapshot","forEach","docItem"],"sources":["/workspaces/SDM-Classes/src/components/ListPage.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { db } from '../firebaseConfig';\r\nimport { collection, onSnapshot, doc, deleteDoc, query, getDocs } from 'firebase/firestore';\r\n\r\nconst ListSection = ({ title, items, handleDelete, handleDeleteAll, itemType }) => (\r\n  <div className=\"section\">\r\n    <h2>{title}</h2>\r\n    <div className=\"card-container\">\r\n      {items.map(item => (\r\n        <div key={item.id} className=\"card\">\r\n          <h4>{item.title || 'Notice'}</h4>\r\n          <p>{item.message || `Time: ${new Date(item.startTime).toLocaleString()}`}</p>\r\n          <button className=\"delete-btn\" onClick={() => handleDelete(itemType, item.id)}>Delete</button>\r\n        </div>\r\n      ))}\r\n    </div>\r\n    <button className=\"delete-all-btn\" onClick={() => handleDeleteAll(itemType)}>Delete All {title}</button>\r\n  </div>\r\n);\r\n\r\nconst ListPage = () => {\r\n  const [notices, setNotices] = useState([]);\r\n  const [classes, setClasses] = useState([]);\r\n  const [videos, setVideos] = useState([]);\r\n  const [homework, setHomework] = useState([]);\r\n  const [loading, setLoading] = useState(true); // Loading state\r\n\r\n  const fetchCollection = (collectionName, setter) => {\r\n    return onSnapshot(collection(db, collectionName), (snapshot) => {\r\n      setter(snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() })));\r\n      setLoading(false); // Stop loading when data is fetched\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    const unsubscribeNotices = fetchCollection('notices', setNotices);\r\n    const unsubscribeClasses = fetchCollection('classes', setClasses);\r\n    const unsubscribeVideos = fetchCollection('videos', setVideos);\r\n    const unsubscribeHomework = fetchCollection('homework', setHomework);\r\n    \r\n    return () => {\r\n      unsubscribeNotices();\r\n      unsubscribeClasses();\r\n      unsubscribeVideos();\r\n      unsubscribeHomework();\r\n    };\r\n  }, []);\r\n\r\n  const handleDelete = async (collectionName, id) => {\r\n    if (window.confirm('Are you sure you want to delete this item?')) {\r\n      try {\r\n        await deleteDoc(doc(db, collectionName, id));\r\n        alert('Item deleted successfully!');\r\n      } catch (error) {\r\n        console.error('Error deleting item:', error);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleDeleteAll = async (collectionName) => {\r\n    if (window.confirm('Are you sure you want to delete all items?')) {\r\n      try {\r\n        const q = query(collection(db, collectionName));\r\n        const querySnapshot = await getDocs(q);\r\n        querySnapshot.forEach(async (docItem) => {\r\n          await deleteDoc(doc(db, collectionName, docItem.id));\r\n        });\r\n        alert('All items deleted successfully!');\r\n      } catch (error) {\r\n        console.error('Error deleting all items:', error);\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <style>\r\n        {`\r\n          .list-page-container {\r\n            padding: 20px;\r\n            background-color: #f8f9fa;\r\n            min-height: 100vh;\r\n          }\r\n          .section {\r\n            margin-bottom: 40px;\r\n          }\r\n          .section h2 {\r\n            color: #343a40;\r\n            margin-bottom: 20px;\r\n            font-size: 1.5rem;\r\n          }\r\n          .card-container {\r\n            display: grid;\r\n            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\r\n            gap: 20px;\r\n          }\r\n          .card {\r\n            background-color: white;\r\n            border-radius: 10px;\r\n            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\r\n            padding: 20px;\r\n            position: relative;\r\n          }\r\n          .card h4 {\r\n            color: #007bff;\r\n            font-size: 1.2rem;\r\n            margin-bottom: 10px;\r\n          }\r\n          .card p {\r\n            color: #6c757d;\r\n            margin-bottom: 10px;\r\n          }\r\n          .delete-btn, .delete-all-btn {\r\n            background-color: #dc3545;\r\n            color: white;\r\n            border: none;\r\n            padding: 10px;\r\n            cursor: pointer;\r\n            border-radius: 5px;\r\n          }\r\n          .delete-all-btn {\r\n            margin-top: 20px;\r\n          }\r\n          .loading {\r\n            text-align: center;\r\n            font-size: 1.5rem;\r\n            color: #007bff;\r\n          }\r\n        `}\r\n      </style>\r\n\r\n      <div className=\"list-page-container\">\r\n        {loading ? (\r\n          <div className=\"loading\">Loading...</div>\r\n        ) : (\r\n          <>\r\n            <ListSection \r\n              title=\"Notices\"\r\n              items={notices}\r\n              handleDelete={handleDelete}\r\n              handleDeleteAll={handleDeleteAll}\r\n              itemType=\"notices\"\r\n            />\r\n            <ListSection \r\n              title=\"Classes\"\r\n              items={classes}\r\n              handleDelete={handleDelete}\r\n              handleDeleteAll={handleDeleteAll}\r\n              itemType=\"classes\"\r\n            />\r\n            <ListSection \r\n              title=\"Videos\"\r\n              items={videos}\r\n              handleDelete={handleDelete}\r\n              handleDeleteAll={handleDeleteAll}\r\n              itemType=\"videos\"\r\n            />\r\n            <ListSection \r\n              title=\"Homework\"\r\n              items={homework}\r\n              handleDelete={handleDelete}\r\n              handleDeleteAll={handleDeleteAll}\r\n              itemType=\"homework\"\r\n            />\r\n          </>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ListPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}